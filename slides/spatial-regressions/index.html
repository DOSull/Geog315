<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>GEOG 315 Advanced GIS - VUW - O&rsquo;Sullivan</title>
    <meta name="author" content="David O'Sullivan">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="../reveal.js/css/reveal.css">
    <link rel="stylesheet" href="../reveal.js/css/theme/league.css" id="theme">
    <link rel="stylesheet" href="../extra-styles.css">
    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="../reveal.js/plugin/highlight/zenburn.css">
    <!-- Include the appropriate print stylesheet -->
    <script>
      if (window.location.search.match(/print-pdf/gi)) {
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = '../reveal.js/css/print/pdf.css';
        document.getElementsByTagName('head')[0].appendChild(link);
      }
    </script>
    <!-- [if lt IE 9] >
      <script src="reveal.js/lib/js/html5shiv.js"></script>
    <! [endif] -->
  </head>

  <body>
    <div id="header" class="translucent header">
      <a target="_blank" href="https://www.wgtn.ac.nz/sgees">VUW SGEES</a> |
      <a target="_blank" href="https://dosull.github.io/Geog315/">GEOG 315</a> |
      <a target="_blank" href="https://www.wgtn.ac.nz/sgees/about/staff/david-osullivan">O&rsquo;Sullivan</a>
      <a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img style="vertical-align: -15%" src="../cc-license.png"/></a>
    </div>

    <div class="reveal">
      <div class="slides">
        <!-- -------------------------------------------------------------------------------------->
        <section>
        <!-- -------------------------------------------------------------------------------------->
          <section data-background-image='images/galapagos-iguana.jpg'>
            <p class='attribution'>image source <a target='_blank' href='https://commons.wikimedia.org/wiki/File:Galapagos_iguana1.jpg'>commons.wikimedia.org</a></p>
            <div class='translucent fragment'>
              <h1>From overlay to spatial regression(s)</h1>
              <h2><a href='#/1'>Making overlay more evidence-based</a></h2>
              <h2><a href='#/2'>Regression models</a></h2>
              <h2><a href='#/3'>Spatial aspects</a></h2>
              <h2><a href='#/4'>Geographically weighted regression</a></h2>
            </div>
          </section>
        <!-- -------------------------------------------------------------------------------------->
        </section>
        <!-- ===================================================================================-->
        <section data-background="images/scales-of-justice.jpg" class='translucent'>
        <!-- -------------------------------------------------------------------------------------->
          <section class='translucent'>
          <p class="attribution">image source <a target="_blank" href="https://www.flickr.com/photos/hisgett/6266059533/">
          flickr</a> by <a href="https://www.flickr.com/photos/hisgett/">Tony Hisgett</a>
          </p>
            <h1>Making overlay more<br />evidence-based</h1>
            <h2>In overlay we need weights to associate<br />
              with each layer; where to get them?</h2>
            <h2>
              <ul>
                <li>Inexpert opinion (gut feel?<br /><a target="_blank" href="http://www.cc.com/video-clips/63ite2/the-colbert-report-the-word---truthiness">truthiness</a>? &lsquo;seems about right&rsquo;?)</li>
                <li>Expert opinion</li>
              </ul>
            </h2>
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section data-background-transition='none' class='translucent'>
            <h1>Weights-of-evidence</h1>
            <h2>Use relative rates of occurrence of<br />
              phenomena of interest in different regions</h2>
            <h2>For each factor weight is events per unit area<br />
              <em>inside</em> vs. <em>outside</em> area where factor applies</h2>
            <h2>\[
            w_X = \frac{(n_{\mathrm{in}\,X}/A_X)}{(n_{\mathrm{not\,in}\,X}/A_{\mathrm{not}\,X})}
            \]
            </h2>
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section data-background-color='#000'>
            <img src='images/weighted-overlay.png'>
<div class="fragment" style='position:relative; bottom:100px;'>
  <h3>
    <pre class="stretch">
      <code data-trim data-noescape contenteditable class="r" style='background:#00000060;'>
# A tibble: 4 x 6
  label  area     n in_density out_density weight
  <fct> <dbl> <int>      <dbl>       <dbl>  <dbl>
1 A     2222.    22    0.00990     0.00740  1.34
2 B     3139.    23    0.00733     0.00803  0.912
3 C     5044.    20    0.00396     0.0105   0.376
4 D     1948.    32    0.0164      0.00625  2.63
      </code>
    </pre>
  </h3>
</div>
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section data-markdown data-background-transition='none' class='translucent'>
            # Weights-of-evidence overlay
            ## A principled approach to determining relative importance of factors
            ## No convenient tool, but easy enough to calculate
            ## Weights tell us relative probability of occurrence in each cover type or region
            ## Weights usually converted to log form and summed

          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section data-background="images/global-landslide-susceptibility.jpg">
          <p class="attribution">image source <a target="_blank" href="https://www.earthobservatory.nasa.gov/IOTD/view.php?id=7783">
          earthobservatory.nasa.gov
          </a></p>
            <div class="translucent fragment">
            <h1>In practice</h1>
            <h2>Overlay is often a &lsquo;first cut&rsquo;</h2>
            <h2>More sophisticated models are used to refine maps</h2>
            </div>
          </section>
        <!-- -------------------------------------------------------------------------------------->
        </section>
        <!-- ===================================================================================-->
        <section data-background-color='#0985d0'>
        <!-- -------------------------------------------------------------------------------------->
          <section data-background="images/galton.jpg">
            <p class="attribution" style="width:410px;">
              Francis Galton&rsquo;s illustration of correlation, 1875
              image source <a target="_blank" href="http://commons.wikimedia.org/wiki/File:Galton%27s_correlation_diagram_1875.jpg">
              commons.wikimedia.org
              </a>
            </p>
            <div class="translucent">
            <h1>Regression &amp; friends</h1>
            <h2>Regression is a standard statistical approach to relating variables
            to one another</h2>
            <h2>Based on a <em>statistical model</em></h2>
            <h2>We can use regression to determine \(f(\mathbf{Y})\) in overlay</h2>
            </div>
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section>
            <h1>Structure of regression</h1>
            <h2><em>Dependent variable</em> (the phenomenon we are modelling)</h2>
            <h2><em>Independent variables</em> (the explanatory factors)</h2>
            <h2>There are various preferences for the distribution of the variables (normal, no outliers, etc.), which makes <em>exploring data first</em> really important, especially for outlier detection</h2>
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section>
            <h1>The result</h1>
            <h2>
              \[
              y = b_0 + b_1x_1 + \ldots + b_ix_i + \ldots +\\ b_px_p + \epsilon
              \]
            </h2>
            <h3>
              where \(y\) is the dependent variable, \(x_i\) is the independent variables, \(b_i\) are the regression coefficients, and \(\epsilon\) is the model error
            </h3>
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section>
            <h1>Some wrinkles</h1>
            <h2>Where independent variables are non-numeric use <em>dummy variables</em></h2>
            <h2>Where dependent variable is binary (yes/no, presence/absence), use <em>logistic regression</em></h2>
            <h2>Choice of which variables to consider and which to include/exclude is key: be wary about including many closely interrelated variables</h2>
          </section>
        <!-- -------------------------------------------------------------------------------------->
        </section>
        <!-- ===================================================================================-->
        <section>
        <!-- -------------------------------------------------------------------------------------->
          <section data-background-image='images/space.jpg' class="translucent">
            <h1>Spatial aspects</h1>
            <h2>Trend surface analysis (spatial coordinates as variables)</h2>
            <h2>Including spatial measures as variables (e.g., distance to a park)</h2>
            <h2>Mapping regression model errors (the <em>residuals</em>)</h2>
            <h3>... because we may be more interested in local than global effects</h3>
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section data-background="images/lake-hillier-australia.jpg" class="translucent">
            <p class="attribution"><a target="_blank" href="https://goo.gl/maps/DPXdr">
              Lake Hillier, Australia</a> apparently it's really pink...
              image source <a target="_blank"
              href="http://culturauniversale.blogspot.com/2013/09/paesaggi-bellissimi.html">
              culturauniversale.blogspot.com</a>
            </p>
            <h1>Residual mapping</h1>
            <h2>Often outliers are more interesting than the model!</h2>
            <h2>Point to <em>where interesting things may be happening</em></h2>
            <h2>Perhaps a <em>clue to missing factors</em></h2>
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section data-markdown data-background-color='#09f43950'>
            # A simple example
            ## Drawing on data from Chapter 7 in Peter Rogerson&rsquo;s *Statistical Methods for Geography*, 2001 (1st edn)
            ## Biodiversity in the Galapagos
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section>
            <img src='images/galapagos-map.png'>
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section>
            <img src='images/galapagos-plot.png'>
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section>
            <img src='images/galapagos-plot-data.png'>
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section>
            <img src='images/model-1.png'>
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section>
            <img src='images/model-2.png'>
          </section>
        <!-- -------------------------------------------------------------------------------------->
        </section>
        <!-- ===================================================================================-->
        <section>
        <!-- -------------------------------------------------------------------------------------->
          <section data-background-image='images/space.jpg'>
            <h1>Geographically<br />weighted regression<br />(GWR)</h1>
            <h2>An alternative approach that recognises geographical variation</h2>
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section data-background="images/london-houses.jpg">
          <p class="attribution">houses in London Fields<br />
          image source <a target="_blank" href="http://flic.kr/p/5pp4io">flickr.com</a>
          by <a target="_blank" href="https://www.flickr.com/photos/rutlo/">Matthew Rutledge</a></p>
            <h1>Example</h1>
            <h2>Regression model based on floor area, parcel area,
            number of bedrooms, etc.</h2>
            <h3>From Chapter 2 of<br />
            Fotheringham AS, C Brunsdon, and M Charlton. 2002.
            <a target="_blank" href="http://books.google.com/books/about/Geographically_Weighted_Regression.html?id=GFjFX-3dH68C">
            <i>Geographically Weighted Regression: The Analysis of Spatially
            Varying Relationships</i></a> Wiley: Chichester, UK.</h3>
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section data-background="images/london-house-prices.png">
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section data-background="images/london-average-house-prices.png">
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section>
            <img src="images/london-house-prices-model.png"
            style="position:relative; left:-100px; top:20px">
            <img src="images/london-house-prices-model-estimates.png"
            class="fragment" style="position:relative; left:100px; bottom:420px;">
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section data-background="images/london-house-prices-global-residuals.png">
          </section>
        <!-- -------------------------------------------------------------------------------------->
          <section data-background="images/london-house-prices-garage.png">
          </section>
        <!-- -------------------------------------------------------------------------------------->
        </section>
        <!-- ===================================================================================-->
        <section>
        <!-- -------------------------------------------------------------------------------------->
          <section data-background="images/tools-by-Matt-Harrop.jpg" class="translucent">
          <p class="attribution">image source
            <a target="_blank" href="https://www.geograph.org.uk/photo/5093309">geograph.org.uk</a>
            by <a target="_blank" href="https://www.geograph.org.uk/profile/18894">Matt Harrop</a>
            <a target="_blank" href="http://creativecommons.org/licenses/by-sa/2.0/">CC2.0 license</a>
          </p>
            <h1>Conclusions</h1>
            <h2>For serious regression work, you should step outside <i>ArcGIS</i></h2>
            <h2><i>R</i> is preferred, but <i>SPSS</i>, <i>SASS</i> might also be used</h2>
            <h2>There is a standalone tool for <i>GWR</i>, but also an <i>R</i> package</h2>
            <h2>The <i>Arc</i> toolbox can get you started but is limited</h2>
          </section>
        <!-- -------------------------------------------------------------------------------------->
        </section>
        <!-- ===================================================================================-->
      </div>
    </div>
    <!-- -------------------------------------------------------------------------------------->
    <script src="../reveal.js/lib/js/head.min.js"></script>
    <script src="../reveal.js/js/reveal.js"></script>
    <script src="../config-options.js"></script>
  </body>
</html>
